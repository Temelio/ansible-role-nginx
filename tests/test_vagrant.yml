---

# Role Vagrant tests

- hosts: all
  remote_user: vagrant
  roles:
    - "{{ role_name }}"
  post_tasks:
    - include: ./test_common.yml
  vars:
    role_name: "{{ lookup('env','ANSIBLE_ROLE_NAME') }}"
    nginx_servers:
      - name: 'foobar'
        is_enabled: True
        listen:
          - 80
        locations:
          - target: '/foo'
            options:
              - 'try_files $uri =404'
              - 'root /var/www/foo'
          - target: '/bar'
            options:
              - 'try_files $uri =404'
              - 'root /var/www/bar'
        root: '/var/www/foo'
        index: 'index.html'
        server_name:
          - 'localhost'
        additional_rules: []
        use_ssl: False

